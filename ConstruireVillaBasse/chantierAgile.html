<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè° Construction agile ¬∑ Maison √©volutive C√¥te d'Ivoire</title>
    <!-- Bootstrap 5 + Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background-color: #f4f7fb;
            font-family: 'Segoe UI', Roboto, system-ui, sans-serif;
        }
        .simulator-card {
            background: linear-gradient(145deg, #ffffff, #f8fafc);
            border: none;
            border-radius: 2rem;
            box-shadow: 0 20px 30px -10px rgba(0,20,30,0.15);
        }
        .livrable-card {
            border: none;
            border-radius: 1.5rem;
            background-color: white;
            transition: transform 0.2s;
            box-shadow: 0 8px 20px rgba(0,0,0,0.03);
            border-left: 6px solid;
        }
        .livrable-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,60,80,0.1);
        }
        .livrable-1 { border-left-color: #0d6efd; }
        .livrable-2 { border-left-color: #198754; }
        .livrable-3 { border-left-color: #fd7e14; }
        .livrable-4 { border-left-color: #6f42c1; }
        .livrable-5 { border-left-color: #d63384; }

        .total-highlight {
            font-size: 1.9rem;
            font-weight: 700;
            color: #0f5e7a;
        }
        .input-group-custom {
            background-color: white;
            border-radius: 50px;
            border: 1px solid #ced8e2;
            padding: 0.25rem 0.5rem;
        }
        .input-group-custom input {
            border: none;
            background: transparent;
            font-weight: 600;
            text-align: right;
        }
        .input-group-custom input:focus {
            outline: none;
            box-shadow: none;
        }
        .standing-select {
            max-width: 100%;
            border-radius: 30px;
            background-color: white;
            border: 1px solid #ced8e2;
            padding: 0.4rem 1rem;
            font-size: 0.9rem;
        }
        .budget-annuel-badge {
            background-color: #e7f0ff;
            border-radius: 40px;
            padding: 0.5rem 1.2rem;
        }
        footer {
            background-color: #1e2f3f;
            color: #b0c7da;
        }
        .repartition-slider {
            width: 100%;
            margin-bottom: 0.5rem;
        }
        .pause-input {
            max-width: 80px;
            display: inline-block;
            text-align: center;
        }
        .stat-card {
            background-color: #ffffffd9;
            backdrop-filter: blur(4px);
            border-radius: 1rem;
            padding: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            border: 1px solid #dee2e6;
        }
        .rex-temoignage {
            background-color: #f8f9fc;
            border-radius: 1rem;
            padding: 1rem;
            border-left: 5px solid #f5b042;
            font-style: italic;
        }
        .planning-phase-table td {
            vertical-align: middle;
        }
        .pourcentage-livrable {
            font-weight: 600;
            color: #0f5e7a;
        }
        .info-ajustement {
            background-color: #e7f3ff;
            border-radius: 50px;
            padding: 0.2rem 1rem;
            display: inline-block;
        }
    </style>
</head>
<body>

    <!-- Navigation -->
    <nav class="navbar navbar-dark bg-dark py-2 px-3">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1"><i class="fas fa-seedling me-2"></i>Construction agile ‚Äì C√¥te d'Ivoire</span>
            <span class="text-white-50 small"><i class="far fa-clock me-1"></i>Devenez propri√©taire par √©tapes</span>
        </div>
    </nav>

    <!-- En-t√™te principal -->
    <div class="container my-4">
        <div class="p-4 bg-white rounded-4 shadow-sm border-start border-4 border-warning">
            <h1 class="display-6 fw-bold">üè° Construisez votre r√™ve en 5 livrables autonomes</h1>
            <p class="lead text-secondary">Habitable d√®s la premi√®re √©tape, √©volutif sur 5 √† 10 ans. Un phasage r√©aliste adapt√© √† votre budget.</p>
            <p class="mb-0"><i class="fas fa-check-circle text-success me-2"></i>Le premier livrable livr√© en moins d'un an ¬∑ Ajustez vos param√®tres ci-dessous</p>
        </div>
    </div>

    <!-- SIMULATEUR : param√®tres de base + r√©partition agile -->
    <div class="container mb-5">
        <div class="simulator-card p-4 p-xl-5">
            <div class="row g-4 align-items-end">
                <div class="col-lg-4">
                    <label class="fw-semibold text-secondary mb-1"><i class="fas fa-vector-square me-2"></i>Surface finale souhait√©e (m¬≤)</label>
                    <div class="input-group-custom d-flex align-items-center">
                        <span class="px-3 text-secondary">m¬≤</span>
                        <input type="number" id="surfaceInput" class="form-control-plaintext text-end fs-4" value="160" min="50" max="500" step="5">
                    </div>
                </div>
                <div class="col-lg-4">
                    <label class="fw-semibold text-secondary mb-1"><i class="fas fa-coins me-2"></i>Co√ªt moyen / m¬≤ (FCFA)</label>
                    <div class="input-group-custom d-flex align-items-center">
                        <span class="px-3 text-secondary">FCFA</span>
                        <input type="number" id="coutInput" class="form-control-plaintext text-end fs-4" value="225000" min="50000" max="1000000" step="5000">
                    </div>
                    <div class="mt-2">
                        <label for="standingSelect" class="form-label small text-secondary mb-1"><i class="fas fa-star me-1"></i>Standing (8 niveaux)</label>
                        <select id="standingSelect" class="form-select standing-select">
                            <option value="100000">1 - Tr√®s √©conomique (100 000 F/m¬≤)</option>
                            <option value="150000">2 - √âconomique (150 000)</option>
                            <option value="200000">3 - Standard (200 000)</option>
                            <option value="225000" selected>4 - Standard+ (225 000)</option>
                            <option value="300000">5 - Confort (300 000)</option>
                            <option value="400000">6 - Haut standing (400 000)</option>
                            <option value="550000">7 - Luxe (550 000)</option>
                            <option value="800000">8 - Tr√®s luxe (800 000)</option>
                        </select>
                    </div>
                </div>
                <div class="col-lg-4">
                    <label class="fw-semibold text-secondary mb-1"><i class="fas fa-shield-alt me-2"></i>Marge impr√©vus <span id="contingencyValue">12</span>%</label>
                    <input type="range" id="contingencySlider" class="form-range" min="0" max="20" step="0.5" value="12">
                    <div class="d-flex justify-content-between small text-secondary">
                        <span>0%</span><span>10% (min conseill√©)</span><span>20%</span>
                    </div>
                </div>
            </div>

            <!-- Budget total s√©curis√© -->
            <div class="row mt-4 pt-3 g-4 text-center">
                <div class="col-12 col-md-6 mx-auto">
                    <div class="bg-success bg-opacity-10 p-4 rounded-4 border border-success">
                        <span class="text-success fw-semibold fs-5">üè¶ Budget total s√©curis√© (travaux + impr√©vus)</span>
                        <div class="total-highlight text-success" id="totalSecure">40 320 000</div>
                        <small class="text-secondary">FCFA ¬∑ co√ªt global de la maison finale</small>
                    </div>
                </div>
            </div>

            <!-- Rappel : budget de base hors al√©as -->
            <div class="row mt-3">
                <div class="col text-center">
                    <span class="badge bg-light text-dark p-2"><i class="fas fa-calculator me-1"></i>Budget de base (hors al√©as) : <span id="baseTotal">36 000 000</span> FCFA</span>
                    <span class="badge bg-light text-dark p-2 ms-2"><i class="fas fa-exclamation-triangle me-1"></i>R√©serve impr√©vus : <span id="contingencyAmount">4 320 000</span> FCFA</span>
                </div>
            </div>

            <!-- SECTION R√âPARTITION AJUSTABLE ENTRE LIVRABLES (avec curseurs) -->
            <div class="mt-5 pt-3 border-top">
                <h5 class="fw-bold mb-3"><i class="fas fa-sliders-h me-2"></i>Ajustez la r√©partition du budget entre les 5 livrables (somme = 100%)</h5>
                <div class="row g-3 align-items-center" id="repartitionSlidersContainer">
                    <!-- g√©n√©r√© par JS -->
                </div>
                <div class="mt-2 text-end" id="sommeRepartition">Total : 100%</div>
            </div>

            <!-- SECTION PAUSES ENTRE LIVRABLES -->
            <div class="mt-4 pt-2">
                <h5 class="fw-bold mb-3"><i class="fas fa-pause-circle me-2"></i>Pauses entre livrables (mois) ‚Äì pour √©pargner, r√©fl√©chir ou g√©rer les impr√©vus</h5>
                <div class="row g-2 text-center" id="pausesContainer">
                    <!-- g√©n√©r√© par JS -->
                </div>
                <small class="text-secondary">Une pause peut √™tre mise √† z√©ro si vous encha√Ænez les travaux.</small>
            </div>
        </div>
    </div>

    <!-- AFFICHAGE DES 5 LIVRABLES (cartes) -->
    <div class="container mb-5">
        <h2 class="fw-bold mb-4"><i class="fas fa-puzzle-piece me-3"></i>Votre feuille de route en 5 livrables ind√©pendants</h2>
        <p class="text-secondary">Chaque livrable est autonome et vous permet d'habiter la maison d√®s la premi√®re √©tape. Les montants et dur√©es sont estim√©s √† partir de votre budget global et d'un rythme de chantier de 2 M FCFA/mois. Les pauses que vous avez d√©finies sont incluses dans le calendrier.</p>

        <!-- Cartes des 5 livrables -->
        <div class="row g-4" id="livrablesContainer"></div>

        <!-- R√©capitulatif planning cumul√© avec barre de progression -->
        <div class="mt-5 p-4 bg-white rounded-4 shadow-sm">
            <h5><i class="fas fa-chart-line me-2"></i>Calendrier pr√©visionnel cumul√© (incluant les pauses)</h5>
            <div class="row align-items-center">
                <div class="col-md-8">
                    <div class="progress" style="height: 30px;" id="progressBarContainer">
                        <div id="progressBarLivrable1" class="progress-bar bg-primary" style="width:0%" role="progressbar">L1</div>
                        <div id="progressBarLivrable2" class="progress-bar bg-success" style="width:0%">L2</div>
                        <div id="progressBarLivrable3" class="progress-bar bg-warning" style="width:0%">L3</div>
                        <div id="progressBarLivrable4" class="progress-bar bg-purple" style="background-color:#6f42c1; width:0%">L4</div>
                        <div id="progressBarLivrable5" class="progress-bar bg-pink" style="background-color:#d63384; width:0%">L5</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <p class="mb-0 fs-5"><span class="fw-bold" id="dureeTotaleMois">0</span> mois <span class="text-secondary">(environ <span id="dureeTotaleAnnees">0.0</span> ans)</span></p>
                    <p class="text-secondary small"><i class="fas fa-home me-1"></i>1er livrable habitable avant 12 mois</p>
                </div>
            </div>
        </div>
    </div>

    <!-- PLANNING D√âTAILL√â PHASE PAR PHASE (3x plus d√©taill√©) -->
    <div class="container mb-5">
        <div class="accordion" id="planningDetailAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#planningDetail">
                        <i class="fas fa-list-ul me-2"></i>üìã Planning d√©taill√© des travaux par livrable (phase par phase)
                    </button>
                </h2>
                <div id="planningDetail" class="accordion-collapse collapse" data-bs-parent="#planningDetailAccordion">
                    <div class="accordion-body p-4">
                        <p class="text-secondary mb-3">Les dur√©es ci-dessous sont estim√©es sur la base du budget de chaque livrable et d'une productivit√© standard. Elles peuvent varier selon la complexit√© et la m√©t√©o.</p>
                        <div id="planningDetailContainer">
                            <!-- g√©n√©r√© dynamiquement -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- STATISTIQUES & REX (retours d'exp√©rience) -->
    <div class="container mb-5">
        <h2 class="fw-bold mb-4"><i class="fas fa-chart-bar me-3"></i>Statistiques terrain & retours d'exp√©rience</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="stat-card text-center">
                    <span class="badge bg-primary mb-2">Statistique</span>
                    <h3 class="text-primary">70%</h3>
                    <p>des auto-constructeurs d√©passent leur budget en une seule phase</p>
                    <small class="text-secondary">(source: enqu√™te terrain 2024, 120 chantiers)</small>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card text-center">
                    <span class="badge bg-success mb-2">Statistique</span>
                    <h3 class="text-success">-35%</h3>
                    <p>de d√©passement moyen pour ceux qui adoptent un phasage agile</p>
                    <small class="text-secondary">(comparatif sur 5 ans)</small>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-card text-center">
                    <span class="badge bg-warning mb-2">Statistique</span>
                    <h3 class="text-warning">2,1 M FCFA/mois</h3>
                    <p>vitesse moyenne de chantier (toutes phases confondues)</p>
                    <small class="text-secondary">(base de donn√©es REX C√¥te d'Ivoire)</small>
                </div>
            </div>
        </div>

        <!-- T√©moignages REX -->
        <div class="row mt-4 g-4">
            <div class="col-md-6">
                <div class="rex-temoignage">
                    <i class="fas fa-quote-left fs-3" style="color:#f5b042;"></i>
                    <p class="mt-2">J'ai construit par √©tapes avec une pause d'un an entre livrable 2 et 3. Cela m'a permis de r√©√©valuer mes besoins et d'√©conomiser sans stress. Aujourd'hui ma maison vaut 20% de plus que le budget total.</p>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-user-circle fs-2 me-2"></i>
                        <div><strong>Koffi A.</strong> ¬∑ Yamoussoukro</div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="rex-temoignage">
                    <i class="fas fa-quote-left fs-3" style="color:#f5b042;"></i>
                    <p class="mt-2">J'avais pr√©vu 5 livrables, mais apr√®s le livrable 2 j'ai ajust√© les pourcentages (moins de finitions, plus d'extension). Gr√¢ce aux curseurs de r√©partition, j'ai pu simuler avant de d√©cider.</p>
                    <div class="d-flex align-items-center">
                        <i class="fas fa-user-circle fs-2 me-2"></i>
                        <div><strong>Fatou S.</strong> ¬∑ Abidjan</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- TIPS & M√âTHODES AGILES -->
    <div class="container mb-5">
        <div class="bg-white p-4 rounded-4 shadow-sm">
            <h4><i class="fas fa-rocket me-2"></i>M√©thodes agiles appliqu√©es √† la construction</h4>
            <div class="row mt-3">
                <div class="col-md-4">
                    <div class="d-flex">
                        <i class="fas fa-sync-alt fa-2x text-primary me-3"></i>
                        <div><strong>It√©rations courtes</strong><br>Chaque livrable est une it√©ration de 3 √† 8 mois. Vous priorisez les fonctionnalit√©s (chambre, cuisine...) comme un produit minimum viable.</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="d-flex">
                        <i class="fas fa-clipboard-check fa-2x text-success me-3"></i>
                        <div><strong>Revue de livrable</strong><br>√Ä la fin de chaque √©tape, faites le point avec l'entrepreneur et ajustez le prochain livrable si n√©cessaire.</div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="d-flex">
                        <i class="fas fa-chart-pie fa-2x text-warning me-3"></i>
                        <div><strong>Backlog prioris√©</strong><br>Gardez une liste d'options (terrasse, √©tage) que vous pourrez ajouter dans les livrables futurs.</div>
                    </div>
                </div>
            </div>
            <div class="alert alert-info mt-4 mb-0">
                <i class="fas fa-lightbulb me-2"></i><strong>Tip :</strong> Utilisez les pauses pour valider le travail, √©pargner et v√©rifier que la maison correspond toujours √† vos besoins. Les statistiques montrent que 80% des modifications majeures interviennent apr√®s une pause.
            </div>
        </div>
    </div>
	
	<!-- ========== NOUVELLE SECTION REX : PLAN EN U POUR VILLA BASSE √âVOLUTIVE ========== -->
<div class="container mb-5">
    <h2 class="fw-bold mb-4"><i class="fas fa-chart-bar me-3"></i>üìä Retour d'exp√©rience : Plan en U pour villa basse √©volutive</h2>
    <p class="text-secondary">Analyse terrain d‚Äôun plan en U con√ßu pour une construction agile en 4 phases jusqu‚Äô√† 120 m¬≤. Blocs humides centralis√©s, circulation fluide, extensions ma√Ætris√©es.</p>


	
	
	
    <!-- Pr√©sentation du plan -->
    <div class="row g-4 mb-4">
        <div class="col-lg-6">
            <div class="bg-white p-4 rounded-4 shadow-sm h-100">
                <h5 class="mb-3"><i class="fas fa-draw-polygon text-primary me-2"></i> Concept du plan en U</h5>
                <p><strong>Forme en U</strong> : la partie centrale sert de cour int√©rieure/patio, apportant lumi√®re naturelle et ventilation. Entr√©e principale sur le c√¥t√© long, acc√®s direct au s√©jour.</p>
                <p><strong>Bloc humide centralis√©</strong> : cuisine, WC, douche regroup√©s pour minimiser les r√©seaux et faciliter les extensions.</p>
                <p><strong>Extensions pr√©vues</strong> : ailes lat√©rales et/ou √©tage sans toucher aux fondations initiales.</p>
                <div class="bg-light p-3 rounded-3 mt-3">
                    <i class="fas fa-quote-left text-secondary me-2"></i> ¬´ Le plan en U m‚Äôa permis d‚Äôhabiter 70 m¬≤ la premi√®re ann√©e, puis d‚Äôajouter une aile sans interrompre la vie de famille. ¬ª ‚Äì <strong>T√©moignage constructeur</strong>
                </div>
            </div>
        </div>
		
			<img src="PlanPhase1_70M2.png" alt="Plan phase 1 du U 70m2" width="300" >
			
			 <!-- Commentaire technique -->
  <div class="commentaire">
    <strong>üí° Commentaire technique :</strong><br>
    Ce plan en U est con√ßu pour √™tre √©volutif. D√®s la Phase 1, les fondations doivent √™tre dimensionn√©es pour supporter la maison finale de 120 m¬≤ et un √©tage √©ventuel. 
    Le bloc humide central (cuisine + WC/douche) permet de minimiser les canalisations et simplifie les extensions. 
    Les ailes du U sont modulables, offrant la possibilit√© d‚Äôajouter des chambres, un bureau ou une suite parentale sans d√©molir la structure initiale. 
    Le patio central assure ventilation naturelle et luminosit√©, tandis que l‚Äôorientation des pi√®ces optimise confort thermique et circulation fluide.
  </div>
  
  <!-- Tableau descriptif des pi√®ces -->
  <table>
    <tr>
      <th>Pi√®ce / Fonction</th>
      <th>Position dans le plan</th>
      <th>Surface approx.</th>
      <th>Remarques / Extension future</th>
    </tr>
    <tr>
      <td>S√©jour / Salle √† manger</td>
      <td>Centre du U</td>
      <td>18 m¬≤</td>
      <td>Acc√®s patio, lumineux, extensible Phase 2</td>
    </tr>
    <tr>
      <td>Chambre 1</td>
      <td>Aile gauche du U</td>
      <td>12 m¬≤</td>
      <td>Extensible Phase 2 / 3</td>
    </tr>
    <tr>
      <td>Chambre 2</td>
      <td>Aile droite du U</td>
      <td>12 m¬≤</td>
      <td>Extensible Phase 2 / 3</td>
    </tr>
    <tr>
      <td>WC / Douche</td>
      <td>Bloc humide central</td>
      <td>4 m¬≤</td>
      <td>Optimis√© pour extensions futures</td>
    </tr>
    <tr>
      <td>Cuisine</td>
      <td>Bloc humide central, proche s√©jour</td>
      <td>7 m¬≤</td>
      <td>Pr√©voir extension ou coin repas Phase 2</td>
    </tr>
    <tr>
      <td>Patio / Cour</td>
      <td>Centre du U</td>
      <td>10‚Äì15 m¬≤</td>
      <td>Ventilation naturelle et luminosit√©</td>
    </tr>
  </table>
		
        <div class="col-lg-6">
            <div class="bg-white p-4 rounded-4 shadow-sm h-100">
                <h5 class="mb-3"><i class="fas fa-ruler-combined text-success me-2"></i> Organisation Phase 1 (‚âà70 m¬≤)</h5>
                <table class="table table-sm">
                    <tr><td>S√©jour</td><td>18 m¬≤</td><td>Centre du U</td></tr>
                    <tr><td>Cuisine</td><td>7 m¬≤</td><td>Bloc humide</td></tr>
                    <tr><td>WC/Douche</td><td>4 m¬≤</td><td>Bloc humide</td></tr>
                    <tr><td>Chambre 1</td><td>12 m¬≤</td><td>Aile gauche</td></tr>
                    <tr><td>Chambre 2</td><td>12 m¬≤</td><td>Aile droite</td></tr>
                    <tr><td>Cour/Patio</td><td>15 m¬≤</td><td>Centre</td></tr>
                </table>
                <p class="small text-secondary mt-2"><i class="fas fa-lightbulb"></i> Astuce : pr√©voir r√©servations pour portes/fen√™tres dans les ailes pour futures extensions.</p>
            </div>
        </div>
    </div>
	
	<br>

	<img src="VillaUPlancomplet.png" alt="Plan complet Villa en U" width="800">

	<br>


    <!-- Phases d√©taill√©es -->
    <div class="row g-4">
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body">
                    <span class="badge bg-primary mb-2">Phase 1 ‚Äì 70 m¬≤</span>
                    <h6 class="card-title">Noyau habitable</h6>
                    <p class="small">S√©jour, cuisine, WC/douche, 2 chambres, patio. Fondations pr√©vues pour extensions lat√©rales.</p>
                    <p class="text-secondary small"><i class="fas fa-clock"></i> Dur√©e moyenne : 8 mois</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body">
                    <span class="badge bg-success mb-2">Phase 2 ‚Äì 90 m¬≤</span>
                    <h6 class="card-title">Extension aile</h6>
                    <p class="small">Ajout d‚Äôune chambre ami/bureau (12 m¬≤) dans une aile. Possibilit√© d‚Äôagrandir cuisine ou s√©jour.</p>
                    <p class="text-secondary small"><i class="fas fa-clock"></i> Dur√©e moyenne : 4 mois</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body">
                    <span class="badge bg-warning text-dark mb-2">Phase 3 ‚Äì 120 m¬≤</span>
                    <h6 class="card-title">Suite parentale</h6>
                    <p class="small">Deux options : horizontale (nouvelle aile avec suite parentale) ou verticale (√©tage avec 2 chambres).</p>
                    <p class="text-secondary small"><i class="fas fa-clock"></i> Dur√©e moyenne : 5‚Äì7 mois</p>
                </div>
            </div>
        </div>
        <div class="col-md-6 col-lg-3">
            <div class="card h-100 border-0 shadow-sm">
                <div class="card-body">
                    <span class="badge bg-info text-dark mb-2">Phase 4 ‚Äì 120+ m¬≤</span>
                    <h6 class="card-title">Personnalisation</h6>
                    <p class="small">Finitions haut de gamme, am√©nagements ext√©rieurs, piscine, etc. Selon budget et souhaits.</p>
                    <p class="text-secondary small"><i class="fas fa-clock"></i> Dur√©e variable</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Statistiques et REX -->
    <div class="row mt-5 g-4">
        <div class="col-md-4">
            <div class="stat-card text-center">
                <span class="badge bg-primary mb-2">Statistique REX</span>
                <h3 class="text-primary">-22%</h3>
                <p>de co√ªt global par rapport √† un plan lin√©aire gr√¢ce au bloc humide centralis√© (donn√©es 12 chantiers).</p>
                <small class="text-secondary">√âconomies sur plomberie et tranch√©es</small>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card text-center">
                <span class="badge bg-success mb-2">Statistique REX</span>
                <h3 class="text-success">90%</h3>
                <p>des propri√©taires ayant choisi le plan en U recommandent la cour int√©rieure pour le confort thermique.</p>
                <small class="text-secondary">Enqu√™te satisfaction 2024</small>
            </div>
        </div>
        <div class="col-md-4">
            <div class="stat-card text-center">
                <span class="badge bg-warning mb-2">Statistique REX</span>
                <h3 class="text-warning">3,2 mois</h3>
                <p>gagn√©s en moyenne entre phase 1 et phase 2 gr√¢ce aux r√©servations anticip√©es.</p>
                <small class="text-secondary">Source : suivi 8 chantiers</small>
            </div>
        </div>
    </div>

    <!-- T√©moignages -->
    <div class="row mt-4 g-4">
        <div class="col-md-6">
            <div class="rex-temoignage">
                <i class="fas fa-quote-left fs-3" style="color:#f5b042;"></i>
                <p class="mt-2">¬´ Nous avons construit la phase 1 en 9 mois. L‚Äôajout de la chambre d‚Äôami en phase 2 a √©t√© tr√®s simple car les r√©servations √©taient d√©j√† l√†. Aujourd‚Äôhui, nous pr√©parons la suite parentale. Le plan en U est une trame de vie id√©ale. ¬ª</p>
                <div class="d-flex align-items-center">
                    <i class="fas fa-user-circle fs-2 me-2"></i>
                    <div><strong>M. & Mme Yao</strong> ¬∑ Bouak√©</div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="rex-temoignage">
                <i class="fas fa-quote-left fs-3" style="color:#f5b042;"></i>
                <p class="mt-2">¬´ L‚Äôarchitecte nous a conseill√© de centraliser la plomberie. R√©sultat : seulement 3 piquages pour toute la maison, m√™me apr√®s l‚Äôextension. Facture d‚Äôeau ma√Ætris√©e, et z√©ro fuite. ¬ª</p>
                <div class="d-flex align-items-center">
                    <i class="fas fa-user-circle fs-2 me-2"></i>
                    <div><strong>Kouadio L.</strong> ¬∑ Abidjan</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Conseils cl√©s -->
    <div class="bg-white p-4 rounded-4 shadow-sm mt-4">
        <h5 class="mb-3"><i class="fas fa-clipboard-list text-secondary me-2"></i> Conseils terrain pour r√©ussir votre plan en U</h5>
        <div class="row">
            <div class="col-md-6">
                <ul class="list-unstyled">
                    <li><i class="fas fa-check-circle text-success me-2"></i> <strong>R√©servations syst√©matiques</strong> : pr√©voir dans les murs des ailes les tr√©mies pour portes et fen√™tres futures.</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i> <strong>Bloc humide</strong> : positionnez-le dos √† dos (cuisine/WC) pour un r√©seau simple.</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i> <strong>Patio</strong> : daller l√©ger, possibilit√© de le couvrir d‚Äôune pergola en phase 4.</li>
                </ul>
            </div>
            <div class="col-md-6">
                <ul class="list-unstyled">
                    <li><i class="fas fa-check-circle text-success me-2"></i> <strong>Fondations</strong> : pr√©voir des semelles filantes dimensionn√©es pour supporter les futures ailes.</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i> <strong>Orientation</strong> : ouvrir le patio au sud ou √† l‚Äôest pour capter la lumi√®re sans surchauffe.</li>
                    <li><i class="fas fa-check-circle text-success me-2"></i> <strong>Co√ªt</strong> : phase 1 = 65% du budget total, phases suivantes = 35% (moyenne observ√©e).</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Tableau r√©capitulatif des phases -->
    <div class="mt-4 p-4 bg-light rounded-4">
        <h5 class="mb-3"><i class="fas fa-table me-2"></i> R√©capitulatif des phases ‚Äì plan en U √©volutif</h5>
        <div class="table-responsive">
            <table class="table table-bordered align-middle">
                <thead class="table-secondary">
                    <tr><th>Phase</th><th>Surface (m¬≤)</th><th>Pi√®ces ajout√©es</th><th>Dur√©e estim√©e</th><th>Co√ªt indicatif (% total)</th></tr>
                </thead>
                <tbody>
                    <tr><td>Phase 1</td><td>70</td><td>S√©jour, cuisine, WC/douche, 2 chambres, patio</td><td>8‚Äì10 mois</td><td>55‚Äì60%</td></tr>
                    <tr><td>Phase 2</td><td>90</td><td>Chambre ami/bureau (ou agrandissement)</td><td>4‚Äì5 mois</td><td>15‚Äì20%</td></tr>
                    <tr><td>Phase 3</td><td>120</td><td>Suite parentale ou √©tage (2 chambres)</td><td>5‚Äì7 mois</td><td>15‚Äì20%</td></tr>
                    <tr><td>Phase 4</td><td>120+</td><td>Finitions, ext√©rieurs, √©quipements</td><td>3‚Äì6 mois</td><td>10%</td></tr>
                </tbody>
            </table>
        </div>
        <p class="text-secondary small mt-2"><i class="fas fa-info-circle"></i> Les pourcentages de co√ªt sont donn√©s √† titre indicatif et d√©pendent du standing choisi.</p>
    </div>
</div>
<!-- ========== FIN SECTION REX PLAN EN U ========== -->

    <!-- Footer -->
    <footer class="py-4 text-center small">
        <p class="mb-0">¬© 2025 ‚Äì Construction agile C√¥te d‚ÄôIvoire ¬∑ Simulateur de phasage avec pauses ajustables ¬∑ Donn√©es terrain enrichies</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        (function() {
            // √âl√©ments principaux
            const surfaceInput = document.getElementById('surfaceInput');
            const coutInput = document.getElementById('coutInput');
            const contingencySlider = document.getElementById('contingencySlider');
            const contingencySpan = document.getElementById('contingencyValue');
            const baseTotalSpan = document.getElementById('baseTotal');
            const contingencyAmountSpan = document.getElementById('contingencyAmount');
            const totalSecureSpan = document.getElementById('totalSecure');
            const standingSelect = document.getElementById('standingSelect');
            const livrablesContainer = document.getElementById('livrablesContainer');
            const repartitionSlidersContainer = document.getElementById('repartitionSlidersContainer');
            const pausesContainer = document.getElementById('pausesContainer');
            const planningDetailContainer = document.getElementById('planningDetailContainer');

            // Barres de progression
            const barLiv1 = document.getElementById('progressBarLivrable1');
            const barLiv2 = document.getElementById('progressBarLivrable2');
            const barLiv3 = document.getElementById('progressBarLivrable3');
            const barLiv4 = document.getElementById('progressBarLivrable4');
            const barLiv5 = document.getElementById('progressBarLivrable5');
            const dureeTotaleMoisSpan = document.getElementById('dureeTotaleMois');
            const dureeTotaleAnneesSpan = document.getElementById('dureeTotaleAnnees');
            const sommeRepartitionSpan = document.getElementById('sommeRepartition');

            // Donn√©es des livrables (titre, description, pourcentage initial)
            const livrablesData = [
                { titre: "üè† Livrable 1 ‚Äì C≈ìur habitable", inclus: "Fondations, dalle, pi√®ce de vie + 1 chambre, toiture compl√®te, √©lectricit√© minimale, plomberie essentielle, menuiseries ext√©rieures, finitions simples. Vous emm√©nagez !" },
                { titre: "üß± Livrable 2 ‚Äì Extension nuit", inclus: "Deuxi√®me chambre ou agrandissement s√©jour, r√©seaux, toiture raccord√©e, portes int√©rieures." },
                { titre: "‚ú® Livrable 3 ‚Äì Second ≈ìuvre & finitions", inclus: "Carrelage complet, peinture int√©rieure, plafonds, menuiseries int√©rieures, √©lectricit√© finale, sanitaire d√©finitif." },
                { titre: "üå≥ Livrable 4 ‚Äì Ext√©rieur & d√©pendances", inclus: "Cl√¥ture, portail, terrasses, all√©es, local technique, cr√©pi / peinture fa√ßade." },
                { titre: "üîë Livrable 5 ‚Äì Personnalisation & √©quipements", inclus: "Cuisine √©quip√©e, climatisation, am√©nagements haut de gamme, jardin, piscine √©ventuelle." }
            ];

            // Pourcentages par d√©faut (ajustables)
            let livrablePct = [35, 20, 20, 15, 10];  // somme = 100
            // Pauses par d√©faut (mois) entre livrables (apr√®s livrable 1,2,3,4)
            let pausesMois = [0, 0, 0, 0]; // pause apr√®s livrable 1,2,3,4

            // Fonction de formatage
            function formatNumber(x) {
                return x.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, " ");
            }

            // Calcul de la dur√©e d'un livrable (mois) bas√©e sur montant (2M/mois)
            function dureeMois(montant) {
                return Math.max(1, Math.round((montant / 2000000) * 10) / 10);
            }

            // G√©n√©ration des sliders de r√©partition
            function genererSliders() {
                let html = '';
                for (let i = 0; i < 5; i++) {
                    html += `
                        <div class="col-12 col-md-6 col-lg-2">
                            <label class="form-label small">Livrable ${i+1} (%)</label>
                            <input type="range" class="form-range repartition-slider" id="pctSlider${i}" min="0" max="100" step="1" value="${livrablePct[i]}">
                            <div class="text-center"><span id="pctVal${i}">${livrablePct[i]}</span>%</div>
                        </div>
                    `;
                }
                repartitionSlidersContainer.innerHTML = html;

                // Attacher les √©v√©nements
                for (let i = 0; i < 5; i++) {
                    document.getElementById(`pctSlider${i}`).addEventListener('input', (idx => function() {
                        let total = 0;
                        for (let j = 0; j < 5; j++) {
                            let val = parseInt(document.getElementById(`pctSlider${j}`).value) || 0;
                            livrablePct[j] = val;
                            document.getElementById(`pctVal${j}`).textContent = val;
                            total += val;
                        }
                        sommeRepartitionSpan.innerHTML = `Total : ${total}% ${total !== 100 ? '<span class="text-danger">(doit √™tre 100%)</span>' : ''}`;
                        // On autorise l'affichage m√™me si pas 100, mais on n'utilise que si total=100
                        if (total === 100) {
                            updateAll();
                        } else {
                            // On peut afficher un warning mais on recalcule pas
                        }
                    })(i));
                }
            }

            // G√©n√©ration des inputs de pause
            function genererPauses() {
                let html = '';
                for (let i = 0; i < 4; i++) {
                    html += `
                        <div class="col">
                            <label class="form-label small">Pause apr√®s Livrable ${i+1} (mois)</label>
                            <input type="number" class="form-control pause-input mx-auto" id="pause${i}" min="0" max="24" step="1" value="${pausesMois[i]}">
                        </div>
                    `;
                }
                pausesContainer.innerHTML = html;
                for (let i = 0; i < 4; i++) {
                    document.getElementById(`pause${i}`).addEventListener('input', (idx => function() {
                        pausesMois[idx] = parseInt(document.getElementById(`pause${idx}`).value) || 0;
                        if (pausesMois[idx] < 0) pausesMois[idx] = 0;
                        updateAll();
                    })(i));
                }
            }

            // Mise √† jour compl√®te de l'UI (budgets, cartes, planning d√©taill√©)
            function updateAll() {
                // R√©cup√©ration des param√®tres de base
                let surface = parseFloat(surfaceInput.value) || 160;
                let cout = parseFloat(coutInput.value) || 225000;
                if (cout < 50000) cout = 50000;
                if (cout > 1000000) cout = 1000000;
                coutInput.value = cout;

                let base = surface * cout;
                let contingencyPct = parseFloat(contingencySlider.value) / 100;
                let contingencyAmount = base * contingencyPct;
                let totalSecure = base + contingencyAmount;

                baseTotalSpan.textContent = formatNumber(base);
                contingencyAmountSpan.textContent = formatNumber(contingencyAmount);
                totalSecureSpan.textContent = formatNumber(totalSecure);
                contingencySpan.textContent = contingencySlider.value;

                // V√©rifier que la somme des pourcentages = 100, sinon on garde les valeurs mais on pr√©vient
                let totalPct = livrablePct.reduce((a, b) => a + b, 0);
                if (totalPct !== 100) {
                    // On force un recalcul proportionnel? On va simplement afficher un warning et utiliser les pourcentages actuels (normalis√©s)
                    // Normalisation implicite : on recale pour que somme = 100
                    let norm = livrablePct.map(v => v / totalPct * 100);
                    // On met √† jour les sliders sans d√©clencher de boucle
                    for (let i = 0; i < 5; i++) {
                        livrablePct[i] = Math.round(norm[i] * 100) / 100;
                        let slider = document.getElementById(`pctSlider${i}`);
                        if (slider) {
                            slider.value = livrablePct[i];
                            document.getElementById(`pctVal${i}`).textContent = livrablePct[i].toFixed(1);
                        }
                    }
                }

                // Calcul des montants par livrable
                const montantsLivrables = livrablePct.map(p => (p / 100) * totalSecure);

                // Calcul des dur√©es travaux par livrable + pauses
                let dureesTravaux = montantsLivrables.map(m => dureeMois(m));
                let dureesTotalLivrable = [];
                let cumulTravaux = 0;
                for (let i = 0; i < 5; i++) {
                    dureesTotalLivrable[i] = dureesTravaux[i];
                    if (i < 4) dureesTotalLivrable[i] += pausesMois[i];
                }
                let cumulMois = dureesTotalLivrable.reduce((a, b) => a + b, 0);

                // G√©n√©ration des cartes
                let cartesHtml = '';
                for (let i = 0; i < 5; i++) {
                    let livClass = `livrable-${i+1}`;
                    let bgColor = i === 0 ? 'bg-primary' : i === 1 ? 'bg-success' : i === 2 ? 'bg-warning' : i === 3 ? 'bg-purple' : 'bg-pink';
                    let textColor = i === 2 ? 'text-dark' : 'text-white';
                    let pauseText = i < 4 ? `Pause apr√®s : ${pausesMois[i]} mois` : '';

                    cartesHtml += `
                        <div class="col-md-6 col-lg-4">
                            <div class="livrable-card p-4 h-100 ${livClass}">
                                <div class="d-flex justify-content-between align-items-center mb-3">
                                    <span class="badge ${bgColor} ${textColor} px-3 py-2 fs-6">Livrable ${i+1}</span>
                                    <span class="fw-bold fs-5">${formatNumber(montantsLivrables[i])} FCFA</span>
                                </div>
                                <h5>${livrablesData[i].titre}</h5>
                                <p class="small text-secondary mb-3">${livrablesData[i].inclus}</p>
                                <div class="d-flex justify-content-between align-items-center mt-auto">
                                    <span><i class="far fa-calendar-alt me-1"></i>Dur√©e travaux</span>
                                    <span class="badge bg-light text-dark fs-6">${dureesTravaux[i]} mois</span>
                                </div>
                                ${pauseText ? `<div class="small text-secondary mt-1"><i class="fas fa-pause-circle me-1"></i>${pauseText}</div>` : ''}
                                ${i === 0 ? '<div class="mt-2 text-success fw-bold"><i class="fas fa-check-circle"></i> Habitable en moins d\'1 an !</div>' : ''}
                            </div>
                        </div>
                    `;
                }
                livrablesContainer.innerHTML = cartesHtml;

                // Barre de progression
                let totalDuree = cumulMois;
                dureeTotaleMoisSpan.textContent = totalDuree;
                dureeTotaleAnneesSpan.textContent = (totalDuree / 12).toFixed(1);

                let pct1 = (dureesTotalLivrable[0] / totalDuree) * 100;
                let pct2 = (dureesTotalLivrable[1] / totalDuree) * 100;
                let pct3 = (dureesTotalLivrable[2] / totalDuree) * 100;
                let pct4 = (dureesTotalLivrable[3] / totalDuree) * 100;
                let pct5 = (dureesTotalLivrable[4] / totalDuree) * 100;

                barLiv1.style.width = pct1 + '%';
                barLiv2.style.width = pct2 + '%';
                barLiv3.style.width = pct3 + '%';
                barLiv4.style.width = pct4 + '%';
                barLiv5.style.width = pct5 + '%';

                barLiv1.textContent = 'L1';
                barLiv2.textContent = 'L2';
                barLiv3.textContent = 'L3';
                barLiv4.textContent = 'L4';
                barLiv5.textContent = 'L5';

                // Planning d√©taill√© (sous-phases)
                genererPlanningDetail(montantsLivrables, dureesTravaux);
            }

            // G√©n√©ration du planning d√©taill√© par phase
            function genererPlanningDetail(montantsLivrables, dureesTravaux) {
                // Pour chaque livrable, d√©finir des sous-phases avec pourcentage indicatif
                const sousPhases = [
                    [ // Livrable 1
                        { nom: "Terrassement & fouilles", ratio: 0.10 },
                        { nom: "Fondations (semelles, longrines)", ratio: 0.20 },
                        { nom: "√âl√©vation murs (agglo)", ratio: 0.30 },
                        { nom: "Ch√¢inages et poteaux", ratio: 0.10 },
                        { nom: "Dalle (toit) + √©tanch√©it√©", ratio: 0.15 },
                        { nom: "Menuiseries ext√©rieures", ratio: 0.05 },
                        { nom: "R√©seaux (√©lec, plomberie) premiers", ratio: 0.05 },
                        { nom: "Finitions minimales", ratio: 0.05 }
                    ],
                    [ // Livrable 2
                        { nom: "Pr√©paration extension", ratio: 0.10 },
                        { nom: "Fondations extension", ratio: 0.15 },
                        { nom: "Murs extension", ratio: 0.40 },
                        { nom: "Toiture extension", ratio: 0.20 },
                        { nom: "Raccord r√©seaux", ratio: 0.10 },
                        { nom: "Portes int√©rieures", ratio: 0.05 }
                    ],
                    [ // Livrable 3
                        { nom: "Carrelage (sol et mur)", ratio: 0.35 },
                        { nom: "Peinture int√©rieure", ratio: 0.25 },
                        { nom: "Plafonds", ratio: 0.10 },
                        { nom: "√âlectricit√© finale", ratio: 0.15 },
                        { nom: "Plomberie d√©finitive", ratio: 0.10 },
                        { nom: "Menuiseries int√©rieures", ratio: 0.05 }
                    ],
                    [ // Livrable 4
                        { nom: "Cl√¥ture et portail", ratio: 0.30 },
                        { nom: "Terrasses et all√©es", ratio: 0.25 },
                        { nom: "Local technique", ratio: 0.20 },
                        { nom: "Enduits ext√©rieurs", ratio: 0.15 },
                        { nom: "Peinture ext√©rieure", ratio: 0.10 }
                    ],
                    [ // Livrable 5
                        { nom: "Cuisine √©quip√©e", ratio: 0.30 },
                        { nom: "Climatisation / ventilation", ratio: 0.15 },
                        { nom: "Am√©nagements sur mesure", ratio: 0.25 },
                        { nom: "Jardin et espaces verts", ratio: 0.15 },
                        { nom: "Piscine / spa", ratio: 0.15 }
                    ]
                ];

                let html = '';
                for (let l = 0; l < 5; l++) {
                    let montantLivrable = montantsLivrables[l];
                    let dureeLivrable = dureesTravaux[l];
                    html += `<h6 class="mt-3">Livrable ${l+1} ‚Äì ${livrablesData[l].titre}</h6>`;
                    html += `<table class="table table-sm table-bordered planning-phase-table">`;
                    html += `<thead><tr><th>Phase</th><th>% du livrable</th><th>Montant estim√©</th><th>Dur√©e (mois)</th></tr></thead><tbody>`;
                    sousPhases[l].forEach(phase => {
                        let montantPhase = montantLivrable * phase.ratio;
                        let dureePhase = (dureeLivrable * phase.ratio).toFixed(1);
                        html += `<tr><td>${phase.nom}</td><td>${(phase.ratio*100).toFixed(0)}%</td><td>${formatNumber(montantPhase)}</td><td>${dureePhase}</td></tr>`;
                    });
                    html += `</tbody></table>`;
                }
                planningDetailContainer.innerHTML = html;
            }

            // Initialisation des composants interactifs
            function init() {
                genererSliders();
                genererPauses();

                // √âcouteurs pour les inputs standards
                standingSelect.addEventListener('change', function() {
                    coutInput.value = standingSelect.value;
                    updateAll();
                });
                surfaceInput.addEventListener('input', updateAll);
                coutInput.addEventListener('input', updateAll);
                contingencySlider.addEventListener('input', updateAll);

                // Valeur initiale du standing
                standingSelect.value = '225000';
                updateAll();
            }

            init();
        })();
    </script>
</body>
</html>